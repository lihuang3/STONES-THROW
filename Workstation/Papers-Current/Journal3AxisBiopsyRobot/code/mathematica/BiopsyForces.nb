(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 8.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       157,          7]
NotebookDataLength[     12904,        359]
NotebookOptionsPosition[     11827,        316]
NotebookOutlinePosition[     12181,        332]
CellTagsIndexPosition[     12138,        329]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["\<\
What gear system do I need?  What force?  For axis my max torque is 100 Nmm \
(page 93)\
\>", "Subsection",
 CellChangeTimes->{{3.600123791753174*^9, 3.6001238187566843`*^9}, 
   3.600124053963189*^9, {3.6001246574790783`*^9, 3.600124728780047*^9}}],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"MaxGravityTorque", "[", 
     RowBox[{"hoopRad_", 
      RowBox[{"(*", 
       RowBox[{"in", " ", "m"}], "*)"}], ",", "gearboxlength_", 
      RowBox[{"(*", 
       RowBox[{"in", " ", "m"}], "*)"}], ",", " ", "maxAngle_", 
      RowBox[{"(*", 
       RowBox[{"in", " ", "Rad"}], "*)"}], ",", "massMotor_"}], 
     RowBox[{"(*", 
      RowBox[{"in", " ", "Kg"}], "*)"}], "]"}], ":=", 
    RowBox[{"(*", 
     RowBox[{"in", " ", "Nm"}], "*)"}], 
    RowBox[{
     RowBox[{"Sin", "[", "maxAngle", "]"}], 
     RowBox[{"(", 
      RowBox[{"hoopRad", "+", "gearboxlength"}], ")"}], "massMotor", " ", 
     "9.801"}]}], ";"}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"massCarriage", " ", "=", " ", "0.1"}], ";", 
  RowBox[{"(*", 
   RowBox[{"kg", ",", " ", 
    RowBox[{"page", " ", "93"}]}], "*)"}], 
  RowBox[{"(*", " ", 
   RowBox[{
   "mass", " ", "of", " ", "bearing", " ", "is", " ", "0.007", " ", "Kg"}], 
   "*)"}], "\[IndentingNewLine]", 
  RowBox[{"MaxGravityTorque", "[", 
   RowBox[{"0.050", ",", "0.00", ",", 
    RowBox[{"\[Pi]", "/", "6"}], ",", "massCarriage"}], "]"}], 
  "  "}]}], "Input",
 CellChangeTimes->{{3.600123822222456*^9, 3.600123884715514*^9}, {
   3.600123918714979*^9, 3.600124089113646*^9}, {3.6001241627229757`*^9, 
   3.6001242031707706`*^9}, {3.600124379542346*^9, 3.6001244029940157`*^9}, {
   3.600124508173874*^9, 3.600124515670465*^9}, 3.60012458024646*^9, {
   3.600124613782826*^9, 3.600124621371406*^9}, {3.600126793803162*^9, 
   3.6001268465163803`*^9}, {3.6001305144028263`*^9, 3.600130514780634*^9}, {
   3.60018309735662*^9, 3.600183099250454*^9}, {3.617108988723002*^9, 
   3.617109005423843*^9}, 3.617109150434943*^9}],

Cell[BoxData["0.024502500000000003`"], "Output",
 CellChangeTimes->{{3.6001240272952213`*^9, 3.600124047373824*^9}, 
   3.600124204781889*^9, {3.600124379983062*^9, 3.600124406500608*^9}, {
   3.600124509185493*^9, 3.600124515976283*^9}, 3.6001245808988*^9, {
   3.600124614365118*^9, 3.6001246217154417`*^9}, 3.600126847633202*^9, 
   3.600130515337117*^9, 3.600183100144712*^9, 3.605000007021739*^9, 
   3.617108475085225*^9, {3.617108992185595*^9, 3.617109005934759*^9}, 
   3.6171091511071978`*^9}]
}, Open  ]],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Msat", " ", "=", " ", 
    RowBox[{"1.36", " ", 
     SuperscriptBox["10", "6"]}]}], ";"}], 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"A", "/", "m"}], ",", " ", 
    RowBox[{"from", " ", 
     ButtonBox[
      RowBox[{
       RowBox[{"An", " ", "MRI"}], "-", 
       RowBox[{
       "powered", " ", "and", " ", "controlled", " ", "actuator", " ", 
        "technology", " ", "for", " ", "tetherless", " ", "robotic", " ", 
        "interventions", " "}]}],
      BaseStyle->"Hyperlink",
      ButtonData->{
        URL[
        "http://robotics.tch.harvard.edu/publications/pdfs/\
vartholomeos2013MRI.pdf"], None},
      ButtonNote->
       "http://robotics.tch.harvard.edu/publications/pdfs/vartholomeos2013MRI.\
pdf"]}]}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ForceMag", "[", 
   RowBox[{"sphereRad_", ",", "grad_"}], "]"}], ":=", 
  RowBox[{
   FractionBox["4", "3"], "\[Pi]", " ", 
   SuperscriptBox["sphereRad", "3"], "Msat", " ", 
   "grad"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"massCapsule", "[", "rad_", "]"}], ":=", 
   RowBox[{
    FractionBox["4", "3"], "\[Pi]", " ", 
    SuperscriptBox["rad", "3"], "DensityFerrous"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"DensityFerrous", " ", "=", " ", "7850"}], ";"}], 
  RowBox[{"(*", 
   RowBox[{"kg", "/", 
    SuperscriptBox["m", "3"]}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"TorqueMotor", "[", 
    RowBox[{"sphereRad_", ",", "grad_", ",", "rotorLen_"}], "]"}], ":=", 
   RowBox[{"rotorLen", " ", 
    RowBox[{"ForceMag", "[", 
     RowBox[{"sphereRad", ",", "grad"}], "]"}]}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"outputTorqueDesign", "[", 
    RowBox[{
    "efficiency_", ",", "sphereRad_", ",", "GearRatio_", ",", "MaxGrad_", ",",
      "RotorRad_"}], "]"}], ":=", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"TorqueMotor", "[", 
     RowBox[{"sphereRad", ",", "MaxGrad", ",", "RotorRad"}], "]"}], 
    "GearRatio", " ", "*", " ", "efficiency"}]}], 
  " "}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"outputForceDesign", "[", 
   RowBox[{
   "efficiency_", ",", "pinionRad_", ",", "sphereRad_", ",", "GearRatio_", 
    ",", "MaxGrad_", ",", "RotorRad_"}], "]"}], ":=", "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"TorqueMotor", "[", 
    RowBox[{"sphereRad", ",", "MaxGrad", ",", "RotorRad"}], "]"}], 
   "GearRatio", " ", "*", " ", 
   RowBox[{"efficiency", " ", "/", "pinionRad"}]}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"TorqueOrientation", "[", "depthM_", "]"}], ":=", 
  RowBox[{"depthM", " ", 
   FractionBox["60", "100"]}]}]}], "Input",
 CellChangeTimes->{{3.600124746599341*^9, 3.6001248553063517`*^9}, {
  3.6001251715311213`*^9, 3.600125284007918*^9}, {3.600125319005642*^9, 
  3.6001255830317497`*^9}, {3.600125882255693*^9, 3.600125884385518*^9}, {
  3.600125948917297*^9, 3.6001259671632757`*^9}, {3.600126662257435*^9, 
  3.600126692609715*^9}, {3.600126766449255*^9, 3.6001267668099747`*^9}}],

Cell[BoxData[
 RowBox[{"Clear", "[", "ForceMag", "]"}]], "Input",
 CellChangeTimes->{{3.618140138777068*^9, 3.618140139823244*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"ForceMag", "[", 
  RowBox[{"0.002", ",", "0.04"}], "]"}]], "Input",
 CellChangeTimes->{{3.6181401117935343`*^9, 3.618140124340822*^9}}],

Cell[BoxData["0.001822961497123037`"], "Output",
 CellChangeTimes->{{3.6181401270155563`*^9, 3.61814014379839*^9}}]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
What is Reasonable friction values? 
  Keep the same torque, change parameter values to match, and add gravity \
torque and needle depth torque.
   My torque output is :\
\>", "Subsection",
 CellChangeTimes->{{3.600130338352396*^9, 3.60013035702903*^9}, {
   3.600130559269958*^9, 3.6001305958069973`*^9}, 3.600187516704792*^9}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Solve", "[", 
  RowBox[{
   RowBox[{
    RowBox[{"0.81", "*", 
     RowBox[{"TorqueMotor", "[", 
      RowBox[{"0.0025", ",", "0.023", ",", "0.032"}], "]"}], "*", 
     "gearRatio"}], "==", "0.03"}], ",", "gearRatio"}], "]"}]], "Input",
 CellChangeTimes->{{3.600130367702754*^9, 3.6001303763564796`*^9}, {
   3.600130460019309*^9, 3.600130490738001*^9}, {3.6171090845950737`*^9, 
   3.617109203606523*^9}, 3.617109369906653*^9}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"{", 
   RowBox[{"gearRatio", "\[Rule]", "565.3415142508359`"}], "}"}], 
  "}"}]], "Output",
 CellChangeTimes->{{3.617109186666226*^9, 3.617109203962041*^9}, 
   3.617109370157189*^9}],

Cell[BoxData[
 RowBox[{"Solve", "[", "0.1`", "]"}]], "Output",
 GeneratedCell->False,
 CellAutoOverwrite->False,
 CellChangeTimes->{
  3.600130380805472*^9, {3.6001304663026047`*^9, 3.60013049110966*^9}, {
   3.617109084595348*^9, 3.617109135368936*^9}, 3.617109181869079*^9}],

Cell[BoxData["0.00006551267880285916`"], "Output",
 GeneratedCell->False,
 CellAutoOverwrite->False,
 CellChangeTimes->{
  3.600130380805472*^9, {3.6001304663026047`*^9, 3.60013049110966*^9}, {
   3.617109084595348*^9, 3.617109135368936*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
    RowBox[{
    "I", " ", "need", " ", "100", "Nmm", " ", "of", " ", "torque", " ", "for",
      " ", "carriage", " ", "motors", " ", 
     RowBox[{"(", "?", ")"}], " ", "\[IndentingNewLine]", " ", "3", " ", 
     "rotors", " ", "produce", " ", "0.81", " ", "torque", " ", "on", " ", 
     "average", " ", "per", " ", "rotor", " ", "\[IndentingNewLine]", 
     "RotorRad"}], " ", "=", " ", 
    RowBox[{
     RowBox[{"0.032", " ", "m", "\[IndentingNewLine]", "MaxGradient"}], " ", 
     "=", " ", 
     RowBox[{
      RowBox[{"0.023", " ", 
       RowBox[{"T", "/", "m"}], "\[IndentingNewLine]", "sphere", " ", 
       "Radius"}], " ", "=", " ", 
      RowBox[{"0.0025", "\[IndentingNewLine]", 
       RowBox[{"outputTorqueDesign", "[", 
        RowBox[{
        "efficiency_", ",", "sphereRad_", ",", "GearRatio_", ",", "MaxGrad_", 
         ",", "RotorRad_"}], "]"}]}]}]}]}], " ", "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{"0.81", "*", 
   RowBox[{"outputTorqueDesign", "[", 
    RowBox[{"0.5", ",", "0.0025", ",", 
     RowBox[{"2", "*", 
      RowBox[{"5", "^", "4"}]}], ",", "0.023", ",", "0.032"}], 
    "]"}]}]}]], "Input",
 CellChangeTimes->{{3.600125886458671*^9, 3.600125935670629*^9}, {
  3.600125974816448*^9, 3.600126032427726*^9}, {3.6001262594490232`*^9, 
  3.600126352364452*^9}, {3.61710875457722*^9, 3.617108755941259*^9}, {
  3.6171087890168543`*^9, 3.6171088672003613`*^9}, {3.61710894648623*^9, 
  3.617108947381971*^9}, {3.617109253598778*^9, 3.6171092539978724`*^9}, {
  3.617109298327726*^9, 3.617109348674328*^9}}],

Cell[BoxData["0.03316579364394745`"], "Output",
 CellChangeTimes->{{3.6001260036518784`*^9, 3.600126064935348*^9}, {
   3.600126282043021*^9, 3.600126301607896*^9}, {3.6001263489168863`*^9, 
   3.6001263527432623`*^9}, {3.617108795852132*^9, 3.61710881770415*^9}, 
   3.6171088682653227`*^9, 3.617108947817676*^9, 3.617109254557398*^9, 
   3.61710935078502*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
    RowBox[{
    "I", " ", "need", " ", "50", "Nmm", " ", "of", " ", "torque", " ", "for", 
     " ", "needle"}], "-", 
    RowBox[{"insertion", " ", 
     RowBox[{"motor", ".", "  ", "3"}], " ", "rotors", " ", "produce", " ", 
     "0.81", " ", "torque", " ", "on", " ", "average", " ", "per", " ", 
     "rotor"}]}], " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{"0.81", "*", 
   RowBox[{"outputTorqueDesign", "[", 
    RowBox[{"0.5", ",", "0.0025", ",", 
     RowBox[{"2", "*", 
      RowBox[{"5", "^", "4"}]}], ",", "0.023", ",", "0.032"}], 
    "]"}]}]}]], "Input",
 CellChangeTimes->{{3.600125886458671*^9, 3.600125935670629*^9}, {
  3.600125974816448*^9, 3.600126032427726*^9}, {3.6001262594490232`*^9, 
  3.600126352364452*^9}, {3.6001272690391283`*^9, 3.600127333306912*^9}, {
  3.600128477593626*^9, 3.6001284956696177`*^9}, {3.600447315750435*^9, 
  3.600447319644101*^9}, {3.617108827568491*^9, 3.617108828336492*^9}, {
  3.617108882702134*^9, 3.617108934389008*^9}, {3.6171092614698467`*^9, 
  3.617109261548234*^9}}],

Cell[BoxData["0.03316579364394745`"], "Output",
 CellChangeTimes->{{3.6001260036518784`*^9, 3.600126064935348*^9}, {
   3.600126282043021*^9, 3.600126301607896*^9}, {3.6001263489168863`*^9, 
   3.6001263527432623`*^9}, {3.6001272856265993`*^9, 3.600127334363614*^9}, {
   3.600128478559161*^9, 3.600128496065407*^9}, 3.600447320076481*^9, {
   3.617108883410674*^9, 3.617108934756377*^9}, 3.617109261911619*^9}]
}, Open  ]]
}, Open  ]]
},
WindowSize->{1280, 701},
WindowMargins->{{0, Automatic}, {Automatic, 0}},
FrontEndVersion->"8.0 for Mac OS X x86 (32-bit, 64-bit Kernel) (October 6, \
2011)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[579, 22, 259, 5, 34, "Subsection"],
Cell[CellGroupData[{
Cell[863, 31, 1751, 41, 88, "Input"],
Cell[2617, 74, 502, 7, 27, "Output"]
}, Open  ]],
Cell[3134, 84, 3083, 82, 252, "Input"],
Cell[6220, 168, 131, 2, 27, "Input"],
Cell[CellGroupData[{
Cell[6376, 174, 159, 3, 27, "Input"],
Cell[6538, 179, 115, 1, 27, "Output"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[6702, 186, 338, 7, 64, "Subsection"],
Cell[CellGroupData[{
Cell[7065, 197, 452, 10, 27, "Input"],
Cell[7520, 209, 223, 6, 27, "Output"],
Cell[7746, 217, 276, 6, 27, "Output"],
Cell[8025, 225, 242, 5, 27, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[8304, 235, 1596, 35, 118, "Input"],
Cell[9903, 272, 361, 5, 27, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[10301, 282, 1084, 23, 43, "Input"],
Cell[11388, 307, 411, 5, 27, "Output"]
}, Open  ]]
}, Open  ]]
}
]
*)

(* End of internal cache information *)
